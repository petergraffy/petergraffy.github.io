<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Personal Website</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <section id="home">
        <h1>Hi, I'm Peter Graffy</h1>
        <p>Welcome to my personal website.</p>
    </section>

    <section id="about">
        <h2>About Me</h2>
        <p>Write a short paragraph about yourself.</p>
    </section>

    <!-- Projects Section -->
    <section id="projects">
        <h2>Projects</h2>
        <div id="publications">
            <p>Loading publications...</p>
        </div>
    </section>

    <section id="contact">
        <h2>Contact</h2>
        <p>Email: <a href="mailto:petergraffy@gmail.com">petergraffy@gmail.com</a></p>
    </section>

    <footer>
        <p>&copy; Peter Graffy 2024</p>
    </footer>

    <!-- JavaScript to Fetch and Display NIH Publications -->
    <script>
        const fetchPublications = async () => {
            try {
                const esearchUrl = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Peter+Graffy[Author]&retmode=json';
                const esearchResponse = await fetch(esearchUrl);
                const esearchData = await esearchResponse.json();
                const pubmedIDs = esearchData.esearchresult.idlist;

                const ids = pubmedIDs.join(',');
                const esummaryUrl = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${ids}&retmode=json`;
                const esummaryResponse = await fetch(esummaryUrl);
                const esummaryData = await esummaryResponse.json();

                const publicationsDiv = document.getElementById('publications');
                publicationsDiv.innerHTML = '';

                pubmedIDs.forEach(id => {
                    const pub = esummaryData.result[id];
                    const pubDiv = document.createElement('div');
                    pubDiv.classList.add('publication');
                    pubDiv.innerHTML = `
                        <h3><a href="https://pubmed.ncbi.nlm.nih.gov/${id}/" target="_blank">${pub.title}</a></h3>
                        <p>${pub.source}</p>
                    `;
                    publicationsDiv.appendChild(pubDiv);
                });
            } catch (error) {
                console.error('Error fetching publications:', error);
            }
        };

        fetchPublications();
    </script>
</body>
</html>
